import"./index-S-0PP_WJ.js";import{e as a}from"./eventdata-i4gWG6kV.js";const i=document.getElementById("calendar-days"),F=document.getElementById("month-year"),s=document.getElementById("day-template"),J=document.getElementById("event-banner"),O=document.getElementById("prev"),$=document.getElementById("next");document.querySelector(".calendar__weekdays");const h=document.querySelectorAll(".modal"),A=document.getElementById("confirmation-modal"),H=document.querySelector("#card-modal");let c=new Date;function v(){const e=c.getFullYear(),t=c.getMonth(),g=c.getDay(),m=c.toLocaleString("default",{month:"long"});F.textContent=`${m} ${e}`;const B=new Date(e,t,1),_=new Date(e,t+1,0);i.innerHTML="";for(let n=0;n<B.getDay();n++){const l=s.content.cloneNode(!0);s.classList.add("calendar__empty-day"),i.appendChild(l)}for(let n=1;n<=_.getDate();n++){const l=s.content.cloneNode(!0),y=l.querySelector(".calendar__day"),q=y.querySelector(".calendar__day-number");q.textContent=n;for(let o=0;o<a.length;o++){let k=a[o].time,w=a[o].title,u=new Date(k),I=u.getMonth(),x=u.getFullYear();if(u.getDate()===n&&I===t&&x===e){const p=J.content.cloneNode(!0),f=p.querySelector(".calendar__event-name"),d=document.getElementById("card-modal"),N=d.querySelector(".modal__close-button"),T=d.querySelector(".modal-card__info-title"),b=d.querySelector(".modal-card__info-description"),E=d.querySelector(".modal-card__image"),Y=d.querySelector(".modal-card__info-time");f.textContent=w,f.addEventListener("click",()=>{E.src=a[o].image,E.alt=a[o].title,T.textContent=a[o].title,Y.textContent=a[o].time,b.textContent=a[o].description,M(d,a[o])}),N.addEventListener("click",()=>{r(d)}),y.appendChild(p)}}g===new Date().getDate()&&t===new Date().getMonth()&&e===new Date().getFullYear()&&y.classList.add("calendar__today"),i.appendChild(l)}for(let n=0;n<6-_.getDay();n++){const l=s.content.cloneNode(!0);s.classList.add("calendar__empty-day"),i.appendChild(l)}}function D(e){h.forEach(t=>{e.key==="Escape"&&r(t)})}h.forEach(e=>{e.addEventListener("click",function(t){(t.target.classList.contains("modal__close-button")||t.target.classList.contains("modal"))&&r(e)})});let L;function M(e,t){e.classList.add("modal_is-opened"),L=t,document.addEventListener("keydown",D),console.log(e.id),e.id==="confirmation-modal"&&setTimeout(()=>{r(e)},500)}const S=document.querySelector(".modal-card__save-btn");function r(e){e.classList.remove("modal_is-opened"),document.removeEventListener("keydown",D),S.removeEventListener("click",C)}S.addEventListener("click",()=>{C(L),r(H),M(A)});function C(e){const t=JSON.parse(localStorage.getItem("savedEvents"))||[];t.some(m=>m.title===e.title)||(t.push(e),localStorage.setItem("savedEvents",JSON.stringify(t)))}O.addEventListener("click",()=>{c.setMonth(c.getMonth()-1),v()});$.addEventListener("click",()=>{c.setMonth(c.getMonth()+1),v()});v();
